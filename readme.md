# ESS-BRIDGE-NOTIFICATIONS

## Service notification

### Цель :
1. Формирование сообщений для разных видов устройств для одного пользователя
* Android
* iOS
* Desktop




### Менеджер уведомлений кошелька (WNM):

1. Баланс
2. Транзакции
3. Время доступа
4. Состояние 



 ### Сервис сообщений

 1. Регистрация приложения в системе  (Andriod, IoS)
 2. Получение уникального кода от сервиса (Токена)
 3. Возврат токена и регистарция его на сервисе 
 4. Отметка в лог таблице о зарегистрированном пользователе
 5. Подтверждение о регитстрации устройства на сервере сообщений
 6. Логирование операций в системе


 ### Получение нотификешн

 1. Получения событий от сервиса (сети)  
 2. Отправка получателю сообщения для разных устройств  
 3. Создание записи об отправке в лог таблице  



### API



#### Токены

|Метод|Описание|
|---|---|
|**api/token/new/**|Генерация нового токена|
|**api/token/status/{id}**|Состояние токена (активный, блокированный)|
|**api/token/delete/{id}**|Удаление токена из системы|
|**api/token/last/{id}**|Дата и время последней регистрации клиента|
|**api/token/log/{id}**|Лог отправки сообщений|
|**api/token/error/{id}**|Ошибки регистрации по клиенту|
|**api/token/block/{id}**|Блокирование клиента по технической причине|
|**api/token/refresh/{id}**|Обновление (перегенерация) клиента|


#### Cистема

|Метод|Описание|
|---|---|
|**api/sys/status/info/**|Получение общих данных от системы|
|**api/sys/status/load/**|Cведения о загруженности системы|
|**api/sys/log/last/**|Последние 10 сообщений|
|**api/sys/log/clear/**|Очистка всех сообщений в системе|
|**api/sys/users/count/**|Количество зарегистрированных пользователей|
|**api/sys/users/block/**|Количество заблокированных пользователей (по тех. причинам или безопасности)|
|**api/sys/last/**|Десять последних зарегистрированных пользователей в системе|
|**api/sys/error/last/**|Последние ошибки в системе|  
|**api/sys/error/clear/**|Очистка журнала ошибок в системе|  
|**api/sys/error/list/**|Перечень ошибок в системе с кодами|  
|**api/sys/manage/stop/**|Остановка сервиса для обслуживания или в случае регламентных работ|  
|**api/sys/manage/access/**|Запрет доступа для польтзователей кроме админа|  


#### Сообщения

|Метод|Описание|
|---|---|
|**api/notify/last/{Id}**|Получение последнего сообщения для пользователя|
|**api/notify/og/{Id}**|Log полученных сообщений|
|**api/notify/err/{Id}**|Ошибки при отправки сообщения для пользователя|


#### Настройка сервиса

|Метод|Описание|
|---|---|
|**api/settings/count/**|Количество одновременно подключенных пользователей|
|**api/settings/timeout/**|Время ожидания отклика для подключения|
|**api/settings/port/**|Порт для подключения устройств|



#### Администрирование

|Метод|Описание|
|---|---|
|**api/admin/status/**|Общее состояние сервиса|
|**api/admin/clear/**|Очистка всех рабочих данных лог, архив, история|
|**api/admin/stop/**|Остановка работы сервиса|
|**api/admin/system/**|Отправка сообщений администраторам о критическом сосотоянии или ошибках|


#### Wallet

|Метод|Описание|
|---|---|
|**api/wallet/status/{id}**|Общее состояние сервиса|
|**api/wallet/clear/{id}**|Очистка всех рабочих данных лог, архив, история|
|**api/wallet/tx/{id}**|Транзакции|
|**api/wallet/balance/{id}**|Баланс |


#### Error

|Code|Description|
|---|---|
|0|No error.All correct|
|1|Service no avilable|
|2|Blocked|
|3|Bad connection|
|4|Low speed|
|5|Other error|


#### Tables

|Code|Description|
|---|---|
|Notification|Отправленные сообщения|
|Log|Логирование операций|
|Tx|Транзакции|
|Token|Токины|
|Error|Описание ошибок|
|Status|Сататус сервиса|
|Stat|Статистика использования сервиса (нагрузка, количество транзакций, сообщений)|







































